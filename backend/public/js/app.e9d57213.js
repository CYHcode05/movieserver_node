(function(){var e={4147:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return $}});var i=s(998),o=s(266),n=s(9256),r=s(3059),a=s(1713),l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"UserHome"},[t(i.Z,[t(r.Z,[t(n.Z,[t(a.Z,[t(o.Z,[t("Dailyboxoffice")],1)],1),t(a.Z,[t(o.Z,[t("Weeklymoviebox")],1)],1)],1)],1)],1)],1)},u=[],c=function(){var e=this,t=e._self._c;return t("div",[t("h3",{staticClass:"title"},[e._v("일일 박스오피스 순위")]),t("div",{staticClass:"container"},[t("button",{on:{click:e.rotateMoviesLeft}},[t("img",{attrs:{src:e.leftArrowIcon,alt:"Left Arrow"}})]),e._l(e.visibleMovies,(function(s){return t("div",{key:s.rank,staticClass:"movie-block",on:{click:function(t){return e.selectMovie(s)}}},[t("img",{attrs:{src:`https://image.tmdb.org/t/p/w500${s.poster}`,alt:"Movie Poster"}}),t("h4",[e._v(e._s(s.title))]),t("p",[e._v("개봉일:"+e._s(s.openDt))]),t("p",[e._v(e._s(s.rank)+"위")]),t("p",[e._v("전일 관객 수: "+e._s(s.audiCnt))])])})),t("button",{on:{click:e.rotateMoviesRight}},[t("img",{attrs:{src:e.rightArrowIcon,alt:"Right Arrow"}})])],2)])},v=[],d=(s(560),s(558)),h=s(629),m={computed:{...(0,h.rn)(["selectedMovieid","username"])},data(){return{movies:[],visibleMovies:[],nextMovies:[],nextMovieIndex:0,leftArrowIcon:s(1485),rightArrowIcon:s(1891)}},mounted(){this.fetchDailyBoxOffice(),setInterval(this.rotateMoviesRight,3e3)},methods:{selectMovie(e){this.$store.commit("selectMovie",e.id),console.log(this.$store.state.selectedMovieid),console.log(e.id),this.$router.push({name:"onemovie",params:{id:e.id,movie:e}})},rotateMoviesRight(){this.nextMovies.length>0?(this.visibleMovies.push(this.nextMovies[this.nextMovieIndex]),this.visibleMovies.length>4&&this.visibleMovies.shift(),this.nextMovieIndex=(this.nextMovieIndex+1)%this.nextMovies.length):console.log("No more movies to rotate")},rotateMoviesLeft(){this.nextMovies.length>0?(this.nextMovieIndex=(this.nextMovieIndex-1+this.nextMovies.length)%this.nextMovies.length,this.visibleMovies.unshift(this.nextMovies[this.nextMovieIndex]),this.visibleMovies.length>4&&this.visibleMovies.pop()):console.log("No more movies to rotate")},async fetchDailyBoxOffice(){try{const e=new Date,t=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()-1).padStart(2,"0"),o=await fetch(`http://kobis.or.kr/kobisopenapi/webservice/rest/boxoffice/searchDailyBoxOfficeList.json?key=f5eef3421c602c6cb7ea224104795888&targetDt=${t}${s}${i}`),n=await o.json(),r=n.boxOfficeResult.dailyBoxOfficeList.slice(0,10);this.movies=await Promise.all(r.map((async e=>{const t=await fetch(`https://api.themoviedb.org/3/search/movie?api_key=0bf7c555add38a115bea3137a51f5e6d&query=${encodeURIComponent(e.movieNm)}`),s=await t.json(),i=s.results[0]?.poster_path||"",o=await fetch(`https://api.themoviedb.org/3/search/movie?api_key=0bf7c555add38a115bea3137a51f5e6d&query=${encodeURIComponent(e.movieNm)}`),n=await o.json(),r=n.results[0];return{id:e.movieCd,rank:e.rank,title:e.movieNm,poster:i,audiCnt:e.audiCnt,typeNm:e.typeNm,openDt:e.openDt,tmdbid:r?r.id:null}}))),this.nextMovies=[...this.movies],this.visibleMovies=this.nextMovies.slice(0,4)}catch(e){console.error("Failed to fetch daily box office:",e)}}},components:{router:d.Z}},f=m,p=s(1001),g=(0,p.Z)(f,c,v,!1,null,null,null),b=g.exports,x=function(){var e=this,t=e._self._c;return t("div",[t("h3",{staticClass:"title"},[e._v("주간 박스오피스 순위")]),t("div",{staticClass:"container"},[t("button",{on:{click:e.rotateMoviesLeft}},[t("img",{attrs:{src:e.leftArrowIcon,alt:"Left Arrow"}})]),e._l(e.visibleMovies,(function(s){return t("div",{key:s.rank,staticClass:"movie-block",on:{click:function(t){return e.selectMovie(s)}}},[t("img",{attrs:{src:`https://image.tmdb.org/t/p/w500${s.poster}`,alt:"Movie Poster"}}),t("h4",[e._v(e._s(s.title))]),t("p",[e._v("개봉일:"+e._s(s.openDt))]),t("p",[e._v(e._s(s.rank)+"위")]),t("p",[e._v("전일 관객 수: "+e._s(s.audiCnt))]),t("button",{on:{click:function(t){return t.stopPropagation(),e.selectMovie(s)}}},[e._v("영화정보")])])})),t("button",{on:{click:e.rotateMoviesRight}},[t("img",{attrs:{src:e.rightArrowIcon,alt:"Right Arrow"}})])],2)])},I=[],_={data(){return{movies:[],visibleMovies:[],nextMovies:[],nextMovieIndex:0,leftArrowIcon:s(1485),rightArrowIcon:s(1891)}},mounted(){this.fetchweeklyBoxOffice(),setInterval(this.rotateMoviesRight,3e3)},methods:{selectMovie(e){this.$store.commit("selectMovie",e.id),console.log(e.id),this.$router.push({name:"onemovie",params:{id:e.id,movie:e}})},rotateMoviesRight(){this.nextMovies.length>0?(this.visibleMovies.push(this.nextMovies[this.nextMovieIndex]),this.visibleMovies.length>4&&this.visibleMovies.shift(),this.nextMovieIndex=(this.nextMovieIndex+1)%this.nextMovies.length):console.log("No more movies to rotate")},rotateMoviesLeft(){this.nextMovies.length>0?(this.nextMovieIndex=(this.nextMovieIndex-1+this.nextMovies.length)%this.nextMovies.length,this.visibleMovies.unshift(this.nextMovies[this.nextMovieIndex]),this.visibleMovies.length>4&&this.visibleMovies.pop()):console.log("No more movies to rotate")},async fetchweeklyBoxOffice(){try{const e=new Date;e.setDate(e.getDate()-11);const t=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0"),o=await fetch(`http://kobis.or.kr/kobisopenapi/webservice/rest/boxoffice/searchWeeklyBoxOfficeList.json?key=f5eef3421c602c6cb7ea224104795888&targetDt=${t}${s}${i}`),n=await o.json(),r=n.boxOfficeResult.weeklyBoxOfficeList.slice(0,10);this.movies=await Promise.all(r.map((async e=>{const t=await fetch(`https://api.themoviedb.org/3/search/movie?api_key=0bf7c555add38a115bea3137a51f5e6d&query=${encodeURIComponent(e.movieNm)}`),s=await t.json(),i=s.results[0]?.poster_path||"",o=await fetch(`https://api.themoviedb.org/3/search/movie?api_key=0bf7c555add38a115bea3137a51f5e6d&query=${encodeURIComponent(e.movieNm)}`),n=await o.json(),r=n.results[0];return{id:e.movieCd,rank:e.rank,title:e.movieNm,poster:i,audiCnt:e.audiCnt,openDt:e.openDt,tmdbid:r.id}}))),this.nextMovies=[...this.movies],this.visibleMovies=this.nextMovies.slice(0,4)}catch(e){console.error("Failed to fetch weekly box office:",e)}}},components:{router:d.Z}},Z=_,w=(0,p.Z)(Z,x,I,!1,null,null,null),k=w.exports,y={name:"App",components:{Dailyboxoffice:b,Weeklymoviebox:k}},M=y,C=(0,p.Z)(M,l,u,!1,null,null,null),$=C.exports},8946:function(e,t,s){"use strict";var i=s(144),o=s(998),n=s(6190),r=s(720),a=s(8003),l=s(4324),u=function(){var e=this,t=e._self._c;return t(o.Z,[t("Userframe"),t("hr"),t(r.Z,[t("router-view")],1),t(a.Z,[t(n.Z,{attrs:{text:"",value:"서비스 안내"}},[t(l.Z,[e._v("목원대학교 정보통신공학과")])],1)],1)],1)},c=[],v=s(266),d=s(1713),h=function(){var e=this,t=e._self._c;return t("div",{staticClass:"form"},[t(d.Z,[t(v.Z,[t("router-link",{staticClass:"logo",attrs:{to:"/userhome"}},[t("h1",{staticClass:"Userh1"},[e._v("목원영화사이트")])])],1),t(v.Z,{staticClass:"text-right"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchQuery,expression:"searchQuery"}],attrs:{type:"text",placeholder:"검색 영화"},domProps:{value:e.searchQuery},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchMovies.apply(null,arguments)},input:function(t){t.target.composing||(e.searchQuery=t.target.value)}}}),t("router-link",{attrs:{to:"/login"}},[e.isLoggedIn?e._e():t(n.Z,{attrs:{color:"primary"}},[e._v("로그인")])],1),t("router-link",{attrs:{to:"/membership"}},[e.isLoggedIn?e._e():t(n.Z,{attrs:{color:"primary"}},[e._v("회원가입")])],1),e.isLoggedIn?t(n.Z,{attrs:{color:"primary"},on:{click:e.handleLogout}},[e._v("로그아웃")]):e._e(),e.isLoggedIn?t("p",[e._v("환영합니다!")]):e._e()],1)],1)],1)},m=[],f=(s(560),s(558)),p=s(5121),g={data(){return{searchQuery:"",urlinfo:"http://localhost:8000/logout"}},computed:{isLoggedIn(){return this.$store.getters.isLoggedIn}},methods:{handleLogin(){this.$store.commit("login")},handleLogout(){this.$store.commit("logout"),p.Z.get(this.urlinfo,{withCredentials:!0}).then((e=>{"/"!==this.$route.path&&this.$router.push("/")})).catch((e=>{console.error(e)}))},searchMovies(){this.$router.push({name:"searchmovie",params:{name:this.searchQuery}}),this.searchQuery=""}},created(){this.$socket.on("socketEvent",(e=>{"login"===e.type?this.handleLogin():"logout"===e.type&&this.handleLogout()}))},components:{router:f.Z}},b=g,x=s(1001),I=(0,x.Z)(b,h,m,!1,null,"1c5eb386",null),_=I.exports,Z={name:"App",components:{Userframe:_}},w=Z,k=(0,x.Z)(w,u,c,!1,null,"701431d5",null),y=k.exports,M=s(1705);i.ZP.use(M.Z);var C=new M.Z({}),$=s(2346),P=s(3920),D=s(629);i.ZP.use(D.ZP);var L=new D.ZP.Store({state:{username:"",isLoggedin:!1,selectedMovieid:""},getters:{isLogin(e){return""!==e.username},isLoggedIn:e=>e.isLoggedin,selectedMovieid(e){return""!==e.selectedMovieid}},mutations:{setUsername(e,t){e.username=t},login(e){e.isLoggedin=!0},logout(e){e.isLoggedin=!1,e.username=""},selectMovie(e,t){e.selectedMovieid=t}}});const O=(0,P.ZP)("http://localhost:8000",{withCredentials:!0});i.ZP.prototype.$socket=O,i.ZP.use($.Z,p.Z),i.ZP.config.productionTip=!1,i.ZP.prototype.$bus=new i.ZP,new i.ZP({router:f.Z,vuetify:C,store:L,render:e=>e(y)}).$mount("#app")},558:function(e,t,s){"use strict";s.d(t,{Z:function(){return Qe}});var i=s(144),o=s(8345),n=s(998),r=s(6190),a=s(9582),l=s(4886),u=s(266),c=s(9256),v=s(1267),d=s(5005),h=s(4324),m=s(3201),f=s(3059),p=s(1713),g=s(7808),b=function(){var e=this,t=e._self._c;return t(n.Z,{attrs:{id:"app"}},[t(f.Z,[t(c.Z,{staticClass:"text-xs-cente",staticStyle:{position:"relative",top:"20%","margin-left":"20%"}},[t(m.Z,{staticClass:"text-xs-center",attrs:{row:"",wrap:""}},[t(v.Z,[t(a.Z,{staticClass:"mx-auto",attrs:{flat:"","max-width":"800"}},[t(p.Z,{staticStyle:{"margin-top":"60px"}},[t(u.Z,[t(d.Z,{staticStyle:{width:"400px",height:"300px"}},[t("div",{staticClass:"mx-3"},[t(h.Z,{attrs:{color:"black",size:"30px"}},[e._v("person")]),e._v(" userId "),t("div",{staticClass:"mx-1"},[t(g.Z,{attrs:{placeholder:"username",required:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1)],1),t("div",{staticClass:"mx-3"},[t(h.Z,{attrs:{color:"black",size:"30px"}},[e._v("lock")]),e._v(" userPassword "),t("div",{staticClass:"mx-1"},[t(g.Z,{attrs:{placeholder:"userpassword",type:"password",required:""},model:{value:e.userpassword,callback:function(t){e.userpassword=t},expression:"userpassword"}})],1)],1),t(l.h7,[t(r.Z,{attrs:{color:"#2c4f91",dark:"",large:"",block:""},on:{click:e.loginSubmit}},[e._v("Login")])],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)},x=[],I=(s(560),s(5121)),_=s(129),Z=s.n(_),w={data(){return{urlinfo:"http://localhost:8000/login",username:null,userpassword:null}},methods:{loginSubmit(){let e={};e.username=this.username,e.password=this.userpassword;try{I.Z.post(this.urlinfo,Z().stringify(e),{headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0}).then((e=>{1===e.data.code?(alert("로그인 성공"),this.$store.commit("setUsername",e.data.username),console.log(this.$store.state.username),this.$router.push("/")):0===e.data.code?alert("로그인 실패"):2===e.data.code&&(alert("관리자 로그인 성공"),this.$store.commit("setUsername",e.data.username),this.$router.push("/manager"))}))}catch(t){console.error(t)}}}},k=w,y=s(1001),M=(0,y.Z)(k,b,x,!1,null,null,null),C=M.exports,$=s(4147),P=function(){var e=this,t=e._self._c;return t("div",[t("SearchWhatmovie")],1)},D=[],L=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[e.movieResults.length?t("div",{staticClass:"movies"},e._l(e.movieResults,(function(s){return s.poster?t("div",{key:s.movieCd,staticClass:"movie",on:{click:function(t){return e.selectMovie(s)}}},[t("h3",[e._v(e._s(s.title))]),t("p",[e._v("개봉일: "+e._s(s.openDt))]),t("img",{attrs:{src:`https://image.tmdb.org/t/p/w500${s.poster}`,alt:"Movie Poster"}})]):e._e()})),0):e._e()])},O=[],j={data(){return{movieResults:[]}},created(){this.searchMovies()},watch:{"$route.params.name":{immediate:!0,handler:function(e){this.searchMovies()}}},methods:{selectMovie(e){this.$store.commit("selectMovie",e.id),this.$router.push({name:"onemovie",params:{id:e.id,movie:e}}),console.log(e.id)},async searchMovies(){this.movieResults=[];try{const e=encodeURIComponent(this.$route.params.name),t=await fetch(`http://kobis.or.kr/kobisopenapi/webservice/rest/movie/searchMovieList.json?key=f5eef3421c602c6cb7ea224104795888&movieNm=${e}`),s=await fetch(`https://api.themoviedb.org/3/search/movie?api_key=0bf7c555add38a115bea3137a51f5e6d&query=${e}`),i=await s.json(),o=await t.json(),n=i.results[0];if(o.movieListResult.movieList.length>0){const e=o.movieListResult.movieList.map((async e=>{const t=await fetch(`https://api.themoviedb.org/3/search/movie?api_key=0bf7c555add38a115bea3137a51f5e6d&query=${encodeURIComponent(e.movieNm)}`),s=await t.json(),i=s.results[0]?.poster_path||"";return{id:e.movieCd,openDt:e.openDt,title:e.movieNm,poster:i,tmdbid:n.id}}));this.movieResults=await Promise.all(e)}else this.movieResults=[]}catch(e){console.error(e)}}},components:{router:Qe}},R=j,T=(0,y.Z)(R,L,O,!1,null,null,null),N=T.exports,S={props:["name"],components:{SearchWhatmovie:N}},A=S,q=(0,y.Z)(A,P,D,!1,null,null,null),U=q.exports,B=function(){var e=this,t=e._self._c;return t("div",[t("showWhatMovie"),t("Movie_evaluation")],1)},E=[],Q=function(){var e=this,t=e._self._c;return t("div",[e.nmovie?t("div",{staticClass:"main"},[t("div",{staticClass:"img"},[t("img",{attrs:{src:`https://image.tmdb.org/t/p/w500${e.nmovie.poster}`,alt:"movie poster"}})]),t("div",{staticClass:"test"},[t("h2",[e._v(e._s(e.nmovie.title))]),t("p",[e._v("개봉일: "+e._s(e.nmovie.openDt))]),t("p",[e._v("장르: "+e._s(e.genre))]),t("p",[e._v("등급: "+e._s(e.audits))]),t("p",[e._v("감독: "+e._s(e.director))]),t("p",[e._v("출연: "+e._s(e.actor))]),t("p",[e._v("영화 내용: "+e._s(e.overview))])])]):e._e()])},W=[],F={data(){return{nmovie:null,overview:null,genre:null,rating:null,director:null,actor:null,audits:null}},async created(){this.nmovie=this.$route.params.movie,await this.getMovieDetailsTMDB(),await this.getMovieDetailskobis()},methods:{async getMovieDetailskobis(){const e=await fetch(`http://www.kobis.or.kr/kobisopenapi/webservice/rest/movie/searchMovieInfo.json?key=f5eef3421c602c6cb7ea224104795888&movieCd=${this.nmovie.id}`),t=await e.json();this.director=t.movieInfoResult.movieInfo.directors[0].peopleNm,this.actor=t.movieInfoResult.movieInfo.actors.map((e=>e.peopleNm)).join(", "),this.audits=t.movieInfoResult.movieInfo.audits[0].watchGradeNm},async getMovieDetailsTMDB(){const e=await fetch(`https://api.themoviedb.org/3/movie/${this.nmovie.tmdbid}?api_key=0bf7c555add38a115bea3137a51f5e6d`),t=await e.json();this.overview=t.overview,this.genre=t.genres.map((e=>e.name)).join(", "),this.typeNm=this.genre}}},H=F,z=(0,y.Z)(H,Q,W,!1,null,null,null),Y=z.exports,G=s(8201),J=s(9930),K=s(6498),V=s(3687),X=s(2648),ee=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t(m.Z,{attrs:{row:"","justify-center":""}},[t(J.Z,{attrs:{persistent:"","max-width":"500px"},model:{value:e.eval,callback:function(t){e.eval=t},expression:"eval"}},[t(a.Z,[t(l.EB,[t("span",{staticClass:"headline"},[e._v(e._s(e.evTitle))])]),t(l.ZB,[t(c.Z,{attrs:{"grid-list-md":""}},[t(m.Z,{attrs:{wrap:""}},[t(v.Z,{attrs:{xs12:""}},[t(g.Z,{attrs:{label:"영화 이름"},model:{value:e.evaluationInfo.evtitle,callback:function(t){e.$set(e.evaluationInfo,"evtitle",t)},expression:"evaluationInfo.evtitle"}})],1),t(v.Z,{attrs:{xs12:""}},[t(K.Z,{attrs:{"half-increments":!0,"background-color":"black",color:"amber"},model:{value:e.evaluationInfo.evrating,callback:function(t){e.$set(e.evaluationInfo,"evrating",t)},expression:"evaluationInfo.evrating"}})],1),e._v("aa "),t(v.Z,{attrs:{xs12:""}},[t(X.Z,{attrs:{label:"내용"},model:{value:e.evaluationInfo.evcontent,callback:function(t){e.$set(e.evaluationInfo,"evcontent",t)},expression:"evaluationInfo.evcontent"}})],1)],1)],1)],1),t(l.h7,[t(V.Z),t(r.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.btnClick(t)}}},[e._v("취소")]),t(r.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.btnClick(t)}}},[e._v("확인")])],1)],1)],1)],1),t(r.Z,{attrs:{color:"primary"},nativeOn:{click:function(t){return e.addContact()}}},[e._v("추가")]),t(G.Z,{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.items},scopedSlots:e._u([{key:"item",fn:function(s){return[t("tr",[t("td",[e._v(e._s(s.item.userid))]),t("td",[e._v(e._s(s.item.evtitle))]),t("td",[e._v(e._s(s.item.evrating))]),t("td",{staticClass:"text-xs-right"},[t(r.Z,{attrs:{color:"primary"},nativeOn:{click:function(t){return e.updateContact(s.item)}}},[e._v("수정")]),t(r.Z,{attrs:{color:"primary"},nativeOn:{click:function(t){return e.deleteContact(s.item)}}},[e._v("삭제")]),t(r.Z,{attrs:{color:"primary"},nativeOn:{click:function(t){return e.showDetails(s.item)}}},[e._v("보기")])],1)])]}}])})],1)},te=[],se=s(629),ie={computed:{...(0,se.rn)(["selectedMovieid","username"])},data(){return{urlinfo:"http://localhost:8000/evaluation",evaluationInfo:{userid:null,movieid:null,evtitle:null,evrating:null,evcontent:null},eval:!1,evTitle:null,headers:[{text:"입력자",align:"left",value:"userid"},{text:"영화 이름",align:"left",value:"evtitle"},{text:"평점",align:"left",value:"evrating"}],items:[]}},mounted(){this.$socket.on("from server",(e=>{console.log("Received from server:",e),this.items.push(e)}))},created(){I.Z.get(this.urlinfo,{withCredentials:!0}).then((e=>{console.log("서버 응답:",e.data),this.items=Array.isArray(e.data)?e.data:[],this.items=this.items.filter((e=>e.movieid===this.$store.state.selectedMovieid))})).catch((e=>{console.error("API 요청 오류:",e),e.response&&console.error("오류 응답 데이터:",e.response.data),this.items=[]}))},methods:{beforeDestroy(){this.$store.commit("selectedMovieid",null),this.evaluationInfo.movieid=null},addContact(){this.eval=!0,this.evTitle="추가"},updateContact(e){this.eval=!0,this.evTitle="수정",this.evaluationInfo.userid=this.$store.state.username,this.evaluationInfo.movieid=this.$store.state.selectedMovieid,this.evaluationInfo.evtitle=e.evtitle,this.evaluationInfo.evrating=e.evrating,this.evaluationInfo.evcontent=e.evcontent},deleteContact(e){this.eval=!0,this.evTitle="삭제",this.evaluationInfo.movieid=e.movieid},showDetails(e){this.eval=!0,this.evTitle="보기",this.evaluationInfo.userid=e.userid,this.evaluationInfo.movieid=e.movieid,this.evaluationInfo.evtitle=e.evtitle,this.evaluationInfo.evrating=e.evrating,this.evaluationInfo.evcontent=e.evcontent},btnClick(e){this.eval=!1,"확인"===e.target.innerHTML&&("수정"===this.evTitle?(I.Z.put(this.urlinfo+"/"+this.$store.state.selectedMovieid+"/"+this.$store.state.username,{userid:this.$store.state.username,movieid:this.$store.state.selectedMovieid,evtitle:this.evaluationInfo.evtitle,evrating:this.evaluationInfo.evrating,evcontent:this.evaluationInfo.evcontent},{withCredentials:!0}).then((()=>{I.Z.get(this.urlinfo).then((e=>{this.items=e.data,alert("업데이트 성공")})).catch((e=>{alert("에러 발생: "+e)}))})).catch((e=>{alert("에러 발생: "+e)})),this.$socket.emit("from client","Update request")):"추가"===this.evTitle?(I.Z.post(this.urlinfo+"/"+this.$store.state.username,{userid:this.$store.state.username,movieid:this.$store.state.selectedMovieid,evtitle:this.evaluationInfo.evtitle,evrating:this.evaluationInfo.evrating,evcontent:this.evaluationInfo.evcontent},{withCredentials:!0}).then((()=>{I.Z.get(this.urlinfo).then((e=>{this.items=e.data,alert("추가 성공")})).catch((e=>{alert("에러 발생: "+e)}))})).catch((e=>{alert("에러 발생: "+e)})),this.$socket.emit("from client","Addition request")):"삭제"===this.evTitle&&(I.Z.delete(this.urlinfo+"/"+this.$store.state.username,{withCredentials:!0}).then((e=>{console.log("삭제 후"+e),I.Z.get(this.urlinfo).then((e=>{this.items=e.data,alert("삭제 성공")})).catch((e=>{alert(" 삭제 후 데이터 가져오는 중 에러 발생: "+e)}))})).catch((e=>{alert("에러 발생: "+e)})),this.$socket.emit("from client","Deletion request"))),this.evaluationInfo.userid=null,this.evaluationInfo.movieid=null,this.evaluationInfo.evtitle=null,this.evaluationInfo.evrating=null,this.evaluationInfo.evcontent=null}}},oe=ie,ne=(0,y.Z)(oe,ee,te,!1,null,"58e31d91",null),re=ne.exports,ae={props:["id"],components:{showWhatMovie:Y,Movie_evaluation:re}},le=ae,ue=(0,y.Z)(le,B,E,!1,null,null,null),ce=ue.exports,ve=function(){var e=this,t=e._self._c;return t("div",[t("membership")],1)},de=[],he=function(){var e=this,t=e._self._c;return t("div",[t("h1",[e._v("회원가입")]),t("form",[t("div",[t("label",{attrs:{for:"id"}},[e._v("아이디:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.userInfo.userid,expression:"userInfo.userid"}],attrs:{type:"text",id:"userid"},domProps:{value:e.userInfo.userid},on:{input:function(t){t.target.composing||e.$set(e.userInfo,"userid",t.target.value)}}}),e.userIdExists?t("p",[e._v("이미 사용 중인 아이디입니다.")]):e._e()]),t("div",[t("label",{attrs:{for:"password"}},[e._v("비밀번호:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.userInfo.userpassword,expression:"userInfo.userpassword"}],attrs:{type:"password",id:"userpassword"},domProps:{value:e.userInfo.userpassword},on:{input:function(t){t.target.composing||e.$set(e.userInfo,"userpassword",t.target.value)}}})]),t("div",[t("label",{attrs:{for:"name"}},[e._v("이름:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.userInfo.name,expression:"userInfo.name"}],attrs:{type:"text",id:"name"},domProps:{value:e.userInfo.name},on:{input:function(t){t.target.composing||e.$set(e.userInfo,"name",t.target.value)}}})]),t("div",[t("label",{attrs:{for:"number"}},[e._v("전화번호:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.userInfo.number,expression:"userInfo.number"}],attrs:{type:"text",id:"number",maxlength:"13",placeholder:"010-0000-0000"},domProps:{value:e.userInfo.number},on:{input:[function(t){t.target.composing||e.$set(e.userInfo,"number",t.target.value)},e.formatPhone]}})]),t("div",[t("label",{attrs:{for:"email"}},[e._v("이메일:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.userInfo.email,expression:"userInfo.email"}],attrs:{type:"email",id:"email"},domProps:{value:e.userInfo.email},on:{input:function(t){t.target.composing||e.$set(e.userInfo,"email",t.target.value)}}})]),t("div",[t("label",{attrs:{for:"address"}},[e._v("주소:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.userInfo.address,expression:"userInfo.address"}],attrs:{type:"text",id:"address"},domProps:{value:e.userInfo.address},on:{input:function(t){t.target.composing||e.$set(e.userInfo,"address",t.target.value)}}})]),t("button",{attrs:{type:"button"},on:{click:e.addContact}},[e._v("회원가입")])])])},me=[],fe={data(){return{urlinfo:"http://localhost:8000/user",userInfo:{userid:null,userpassword:null,name:null,number:null,email:null,address:null},userIdExists:!1}},methods:{formatPhone(){let e=this.userInfo.number.replace(/\D/g,"");e.length<=3?this.userInfo.number=e:e.length<=7?this.userInfo.number=e.replace(/(\d{3})(\d+)/,"$1-$2"):this.userInfo.number=e.replace(/(\d{3})(\d{4})(\d+)/,"$1-$2-$3")},async checkUserIdExists(){I.Z.get(this.urlinfo,{withCredentials:!0}).then((e=>{const t=e.data.find((e=>e.userid===this.userInfo.userid));this.userIdExists=!!t})).catch((e=>{alert("에러 발생: "+e)}))},addContact(){this.checkUserIdExists(),this.userIdExists?alert("이미 사용중인 아이디입니다."):I.Z.post(this.urlinfo,this.userInfo,{withCredentials:!0}).then((()=>{alert("회원가입 성공하셨습니다."),this.$router.push("/")})).catch((e=>{alert("에러 발생: "+e)}))}}},pe=fe,ge=(0,y.Z)(pe,he,me,!1,null,"990e0d62",null),be=ge.exports,xe={components:{membership:be}},Ie=xe,_e=(0,y.Z)(Ie,ve,de,!1,null,null,null),Ze=_e.exports,we=function(){var e=this,t=e._self._c;return t("div",[t("Managerform"),t("Manager_evalfrom")],1)},ke=[],ye=function(){var e=this,t=e._self._c;return t("div",{attrs:{userid:"app"}},[t(m.Z,{attrs:{row:"","justify-center":""}},[t(J.Z,{attrs:{persistent:"","max-width":"500px"},model:{value:e.user,callback:function(t){e.user=t},expression:"user"}},[t(a.Z,[t(l.EB,[t("span",{staticClass:"headline"},[e._v(e._s(e.userTitle))])]),t(l.ZB,[t(c.Z,{attrs:{"grid-list-md":""}},[t(m.Z,{attrs:{wrap:""}},[t(v.Z,{attrs:{xs12:""}},[t(g.Z,{attrs:{label:"아이디",required:""},model:{value:e.userInfo.userid,callback:function(t){e.$set(e.userInfo,"userid",t)},expression:"userInfo.userid"}})],1),t(v.Z,{attrs:{xs12:""}},[t(g.Z,{attrs:{label:"비닐번호",required:""},model:{value:e.userInfo.userpassword,callback:function(t){e.$set(e.userInfo,"userpassword",t)},expression:"userInfo.userpassword"}})],1),t(v.Z,{attrs:{xs12:""}},[t(g.Z,{attrs:{label:"사용자",required:""},model:{value:e.userInfo.name,callback:function(t){e.$set(e.userInfo,"name",t)},expression:"userInfo.name"}})],1),t(v.Z,{attrs:{xs12:""}},[t(g.Z,{attrs:{label:"전화번호",required:""},model:{value:e.userInfo.number,callback:function(t){e.$set(e.userInfo,"number",t)},expression:"userInfo.number"}})],1),t(v.Z,{attrs:{xs12:""}},[t(g.Z,{attrs:{label:"주소",required:""},model:{value:e.userInfo.address,callback:function(t){e.$set(e.userInfo,"address",t)},expression:"userInfo.address"}})],1),t(v.Z,{attrs:{xs12:""}},[t(g.Z,{attrs:{label:"등록일",required:""},model:{value:e.userInfo.register_date,callback:function(t){e.$set(e.userInfo,"register_date",t)},expression:"userInfo.register_date"}})],1)],1)],1)],1),t(l.h7,[t(V.Z),t(r.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.btnClick(t)}}},[e._v("취소")]),t(r.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.btnClick(t)}}},[e._v("확인")])],1)],1)],1)],1),t("h3",[e._v("회원목록")]),t(G.Z,{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.items},scopedSlots:e._u([{key:"item",fn:function(s){return[t("tr",[t("td",[e._v(e._s(s.item.userid))]),t("td",[e._v(e._s(s.item.userpassword))]),t("td",[e._v(e._s(s.item.name))]),t("td",[e._v(e._s(s.item.number))]),t("td",[e._v(e._s(s.item.address))]),t("td",[e._v(e._s(s.item.register_date))]),t("td",{staticClass:"text-xs-right"},[t(r.Z,{attrs:{color:"primary"},nativeOn:{click:function(t){return e.updateContact(s.item)}}},[e._v("수정")]),t(r.Z,{attrs:{color:"primary"},nativeOn:{click:function(t){return e.deleteContact(s.item)}}},[e._v("삭제")])],1)])]}}])})],1)},Me=[],Ce={data(){return{urlinfo:"http://localhost:8000/user",userInfo:{_id:null,userid:null,userpassword:null,name:null,number:null,address:null,register_date:null},user:!1,userTitle:null,headers:[{text:"아이디",align:"left",value:"userid"},{text:"패스워드",align:"left",value:"userpassword"},{text:"이름",align:"left",value:"name"},{text:"전화 번호",align:"left",value:"number"},{text:"주소",align:"left",value:"address"},{text:"등록일",align:"left",value:"register_date"}],items:[]}},created(){I.Z.get(this.urlinfo,{withCredentials:!0}).then((e=>{console.log(e.data),this.items=e.data})).catch((e=>{alert("에러 발생: "+e)}))},methods:{updateContact(e){this.user=!0,this.userTitle="수정",this.userInfo.userid=e.userid,this.userInfo.userpassword=e.userpassword,this.userInfo.name=e.name,this.userInfo.number=e.number,this.userInfo.address=e.address,this.userInfo.register_date=e.register_date},deleteContact(e){this.userInfo.userid=e.userid,I.Z.delete(this.urlinfo+"/"+this.userInfo.userid).then((()=>{console.log("삭제 성공"),this.items=this.items.filter((e=>e.userid!==this.userInfo.userid)),alert("삭제 성공")})).catch((e=>{alert("에러 발생: "+e)}))},btnClick(e){this.user=!1,"확인"==e.target.innerHTML&&"수정"==this.userTitle&&I.Z.put(this.urlinfo+"/"+this.userInfo.userid,{userid:this.userInfo.userid,userpassword:this.userInfo.userpassword,name:this.userInfo.name,number:this.userInfo.number,address:this.userInfo.address,register_date:this.userInfo.register_date}).then((()=>{I.Z.get(this.urlinfo).then((e=>{this.items=e.data,alert("업데이트 성공")})).catch((e=>{alert("에러 발생: "+e)}))})).catch((e=>{alert("에러 발생: "+e)})),this.userInfo.userid=null,this.userInfo.userpassword=null,this.userInfo.name=null,this.userInfo.number=null,this.userInfo.address=null,this.userInfo.register_date=null}}},$e=Ce,Pe=(0,y.Z)($e,ye,Me,!1,null,"af979b3e",null),De=Pe.exports,Le=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t(m.Z,{attrs:{row:"","justify-center":""}},[t(J.Z,{attrs:{persistent:"","max-width":"500px"},model:{value:e.eval,callback:function(t){e.eval=t},expression:"eval"}},[t(a.Z,[t(l.EB,[t("span",{staticClass:"headline"},[e._v(e._s(e.evTitle))])]),t(l.ZB,[t(c.Z,{attrs:{"grid-list-md":""}},[t(m.Z,{attrs:{wrap:""}},[t(v.Z,{attrs:{xs12:""}},[t(g.Z,{attrs:{label:"사용자 아이디"},model:{value:e.evaluationInfo.userid,callback:function(t){e.$set(e.evaluationInfo,"userid",t)},expression:"evaluationInfo.userid"}})],1),t(v.Z,{attrs:{xs12:""}},[t(g.Z,{attrs:{label:"영화 아이디"},model:{value:e.evaluationInfo.movieid,callback:function(t){e.$set(e.evaluationInfo,"movieid",t)},expression:"evaluationInfo.movieid"}})],1),t(v.Z,{attrs:{xs12:""}},[t(g.Z,{attrs:{label:"영화 이름"},model:{value:e.evaluationInfo.evtitle,callback:function(t){e.$set(e.evaluationInfo,"evtitle",t)},expression:"evaluationInfo.evtitle"}})],1),t(v.Z,{attrs:{xs12:""}},[t(K.Z,{attrs:{"half-increments":!0,"background-color":"black",color:"amber"},model:{value:e.evaluationInfo.evrating,callback:function(t){e.$set(e.evaluationInfo,"evrating",t)},expression:"evaluationInfo.evrating"}})],1),t(v.Z,{attrs:{xs12:""}},[t(X.Z,{attrs:{label:"내용"},model:{value:e.evaluationInfo.evcontent,callback:function(t){e.$set(e.evaluationInfo,"evcontent",t)},expression:"evaluationInfo.evcontent"}})],1)],1)],1)],1),t(l.h7,[t(V.Z),t(r.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.btnClick(t)}}},[e._v("취소")]),t(r.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.btnClick(t)}}},[e._v("확인")])],1)],1)],1)],1),t(G.Z,{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.items},scopedSlots:e._u([{key:"item",fn:function(s){return[t("tr",[t("td",[e._v(e._s(s.item.userid))]),t("td",[e._v(e._s(s.item.movieid))]),t("td",[e._v(e._s(s.item.evtitle))]),t("td",{staticClass:"text-xs-right"},[t(r.Z,{attrs:{color:"primary"},nativeOn:{click:function(t){return e.deleteContact(s.item)}}},[e._v("삭제")]),t(r.Z,{attrs:{color:"primary"},nativeOn:{click:function(t){return e.showDetails(s.item)}}},[e._v("보기")])],1)])]}}])})],1)},Oe=[],je={data(){return{urlinfo:"http://localhost:8000/evaluation",evaluationInfo:{userid:null,movieid:null,evtitle:null,evrating:null,evcontent:null},eval:!1,evTitle:null,headers:[{text:"입력자",align:"left",value:"userid"},{text:"영화 이름",align:"left",value:"evtitle"},{text:"평점",align:"left",value:"evrating"}],items:[]}},mounted(){this.$socket.on("from server",(e=>{console.log("Received from server:",e),this.items.push(e)}))},created(){I.Z.get(this.urlinfo,{withCredentials:!0}).then((e=>{console.log("서버 응답:",e.data),this.items=Array.isArray(e.data)?e.data:[]})).catch((e=>{console.error("API 요청 오류:",e),e.response&&console.error("오류 응답 데이터:",e.response.data),this.items=[]}))},methods:{deleteContact(e){this.eval=!0,this.evTitle="삭제",this.evaluationInfo.userid=e.userid,this.evaluationInfo.movieid=e.movieid},showDetails(e){this.eval=!0,this.evTitle="보기",this.evaluationInfo.userid=e.userid,this.evaluationInfo.movieid=e.movieid,this.evaluationInfo.evtitle=e.evtitle,this.evaluationInfo.evrating=e.evrating,this.evaluationInfo.evcontent=e.evcontent},btnClick(e){this.eval=!1,"확인"===e.target.innerHTML&&"삭제"===this.evTitle&&(I.Z.delete(this.urlinfo+"/"+this.evaluationInfo.userid,{withCredentials:!0}).then((e=>{console.log("삭제 후"+e),I.Z.get(this.urlinfo).then((e=>{this.items=e.data,alert("삭제 성공")})).catch((e=>{alert(" 삭제 후 데이터 가져오는 중 에러 발생: "+e)}))})).catch((e=>{alert("에러 발생: "+e)})),this.$socket.emit("from client","Deletion request")),this.evaluationInfo.userid=null,this.evaluationInfo.movieid=null,this.evaluationInfo.evtitle=null,this.evaluationInfo.evrating=null,this.evaluationInfo.evcontent=null}}},Re=je,Te=(0,y.Z)(Re,Le,Oe,!1,null,"4308a8f8",null),Ne=Te.exports,Se={components:{Managerform:De,Manager_evalfrom:Ne}},Ae=Se,qe=(0,y.Z)(Ae,we,ke,!1,null,null,null),Ue=qe.exports;i.ZP.use(o.ZP);const Be=[{path:"/",name:"userHome",component:$["default"]},{path:"/login",name:"Login",component:C},{path:"/membership",name:"membership",component:Ze},{path:"/onemovie/:id",name:"onemovie",component:ce,props:!0},{path:"/searchmovie/:name",name:"searchmovie",component:U,props:!0},{path:"/manager",name:"manager",component:Ue},{path:"/userhome",name:"userhome",component:()=>Promise.resolve().then(s.bind(s,4147))}],Ee=new o.ZP({mode:"history",base:"/",routes:Be});var Qe=Ee},1485:function(e,t,s){"use strict";e.exports=s.p+"img/leftarrow.b7bd0ce0.png"},1891:function(e,t,s){"use strict";e.exports=s.p+"img/rightarrow.2d5ea3ff.png"},4654:function(){}},t={};function s(i){var o=t[i];if(void 0!==o)return o.exports;var n=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(n.exports,n,n.exports,s),n.loaded=!0,n.exports}s.m=e,function(){s.amdO={}}(),function(){var e=[];s.O=function(t,i,o,n){if(!i){var r=1/0;for(c=0;c<e.length;c++){i=e[c][0],o=e[c][1],n=e[c][2];for(var a=!0,l=0;l<i.length;l++)(!1&n||r>=n)&&Object.keys(s.O).every((function(e){return s.O[e](i[l])}))?i.splice(l--,1):(a=!1,n<r&&(r=n));if(a){e.splice(c--,1);var u=o();void 0!==u&&(t=u)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[i,o,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.p="/"}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,i){var o,n,r=i[0],a=i[1],l=i[2],u=0;if(r.some((function(t){return 0!==e[t]}))){for(o in a)s.o(a,o)&&(s.m[o]=a[o]);if(l)var c=l(s)}for(t&&t(i);u<r.length;u++)n=r[u],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(c)},i=self["webpackChunkfrontend2"]=self["webpackChunkfrontend2"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=s.O(void 0,[998],(function(){return s(8946)}));i=s.O(i)})();
//# sourceMappingURL=app.e9d57213.js.map